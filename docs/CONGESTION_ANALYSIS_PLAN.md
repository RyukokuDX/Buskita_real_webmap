# 混雑予測機能 開発プラン

---

## 1. 究極の目標: 「このバス、乗れる？」という問いに答える

現在のアプリは「バスがどこにいるか」「バスがどれくらい混んでいるか」を教えてくれる。
しかし、学生が本当に知りたい、最も切実な問いは、

**「今からバス停に向かって、自分は次のバスに乗れるのか？」**

である。

バスが満員でなくても、バス停に長蛇の列ができていれば、乗ることはできない。
このプランは、その究極の問いに答えるための、段階的な開発ロードマップを定義するものである。

---

## 2. 開発ロードマップ（段階的計画）

### フェーズ1:【基礎工事】乗客数データの蓄積

- **目的:**
  - 将来の全ての分析・予測機能の礎となる、客観的な基礎データを収集する。
- **具体的な作業内容:**
  1.  バックエンド (`web_map_app.py`) を改修する。
  2.  リアルタイムで取得している各バスの「乗客数」データを、「取得時刻」「曜日」「バスID」といった情報と共に、データベース (`ryukoku_bus.db`) またはCSVファイルに、継続的に記録・蓄積する機能を実装する。
  3.  まずは最低1〜2週間、データを自動で蓄積し、分析に足るデータ量を確保する。

### フェーズ2:【初期分析】簡易的な「混雑予報」の実装

- **目的:**
  - 蓄積したデータから得られる最初の価値を、ユーザーに還元する。
  - 「予報」機能のプロトタイプを開発し、ユーザーからのフィードバックを得る。
- **具体的な作業内容:**
  1.  フェーズ1で蓄積したデータを分析し、「曜日・時間帯別の平均乗客数」を算出する。
  2.  統計的に「混雑が顕著な時間帯」を特定する。（例：月曜8:30-9:00の瀬田駅発など）
  3.  ダッシュボード上に、現在の時間帯に応じて「**<font color='red'>注意: この時間帯は大変混雑します</font>**」のような、シンプルな警告メッセージを表示する機能を実装する。

### フェーズ3:【発展】未来の予測機能へ

- **目的:**
  - 「バス停の行列」という、観測できない不確定要素に対応し、予測精度を飛躍的に向上させる。
- **具体的なアイデア:**
  - **アイデアA（ユーザー参加型）: 「バス停なう」混雑報告機能**
    - アプリ内に「バス停、めっちゃ混んでる！」「全然人いない」といった、ユーザーがバス停の状況をワンタップで報告できるボタンを設置する。
    - 多くのユーザーからのリアルタイム報告を集計・分析し、「現在、瀬田駅の行列が長くなっています」といった、よりリアルな情報を地図やダッシュボードに反映させる。
  - **アイデアB（データ連携）: 大学の「講義スケジュール」データ活用**
    - 大学の公式な時間割データ（API等で取得できれば理想）と連携する。
    - 「〇限の終了15分後」や「全学休講日」といった客観的な情報に基づき、バスの需要を予測する、より高度な予測モデルを構築する。

---

## 3. この計画が目指すもの

この計画は、「Ryukoku Bus Navi」を、単なる「バスの位置確認アプリ」から、学生の行動計画をサポートし、日々の不安を解消する**「スマートな学生生活のための必須インフラ」**へと進化させることを目指すものである。 